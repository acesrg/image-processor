variables:
  SAFO_DEFAULT_PATH: /home/pi/safo

stages:
  - upload
  - statistics_calculation

upload_job:
  stage: upload
  when: manual
  script:
    - echo "test"
    - ls $SAFO_DEFAULT_PATH
    - cp -r $SAFO_DEFAULT_PATH $CI_PROJECT_DIR
    - ls $CI_PROJECT_DIR/safo/test_images
  artifacts:
    paths:
    - $CI_PROJECT_DIR/safo/test_images
  tags:
    - rpi
    - local

statistics_calculation_job:
  stage: statistics_calculation
  image: paulabeatrizolmedo/image-processor
  when: manual
  script:
    - python src/service/image_processor.py --path $CI_PROJECT_DIR/safo/test_images/
  artifacts:
    paths:
    - $CI_PROJECT_DIR/safo/test_images/processing_results.csv