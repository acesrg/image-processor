variables:
  SAFO_DEFAULT_PATH: /home/pi/safo

stages:
  - test
  - statistics_calculation

test_connection:
  stage: test
  script:
    - ssh -i $RPI_IDENTITY pi@192.168.100.9


statistics_calculation_job:
  stage: statistics_calculation
  image: paulabeatrizolmedo/image-processor
  when: manual
  script:
    - python src/service/image_processor.py --path $CI_PROJECT_DIR/safo/test_images/
  artifacts:
    paths:
    - $CI_PROJECT_DIR/safo/test_images/processing_results.csv
  tags:
    - macos
    - amd64
